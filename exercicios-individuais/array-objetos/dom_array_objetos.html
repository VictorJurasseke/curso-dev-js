<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualizador de Fichas de Alunos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

    <div class="container mt-5 d-none" id="ficha-alunos" style="max-width: 500px;">
        <h1 class="text-center mb-4">Fichas da Turma</h1>

        <div class="card shadow">
            <div class="card-body text-center">
                <h2 class="card-title" id="aluno-nome">Clique em "Próximo" para começar</h2>
                <p class="card-text fs-5">
                    <strong>Idade:</strong> <span id="aluno-idade"></span> anos <br>
                    <strong>Curso:</strong> <span id="aluno-curso"></span>
                </p>
            </div>
        </div>

        <div class="d-flex justify-content-between mt-3">
            <button class="btn btn-secondary" id="btn-anterior">← Anterior</button>
            <button class="btn btn-primary" id="btn-proximo">Próximo →</button>
        </div>
    </div>
    <div class="container mt-5" style="max-width: 500px;">
        <div class="card shadow mt-5" id="card-cadastro">
            <div class="card-header">
                <h3 class="mb-0">Cadastrar Novo Aluno</h3>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label for="nome" class="form-label">Nome:</label>
                    <input type="text" class="form-control" id="nome">
                </div>
                <div class="mb-3">
                    <label for="idade" class="form-label">Idade:</label>
                    <input type="number" class="form-control" id="idade" min="1" max="100">
                </div>
                <div class="mb-3">
                    <label for="curso" class="form-label">Curso:</label>
                    <input type="text" class="form-control" id="curso">
                </div>
                <p id="resultadoParagrafo" class="d-none text-danger small bold">Erro Inesperado.</p>
                <div class="d-flex gap-2">
                    <button type="button" class="btn btn-success flex-fill" id="btn-cadastrar">Salvar</button>
                    <button type="button" class="btn btn-secondary flex-fill" id="btn-cancelar">Cancelar</button>
                </div>
            </div>
        </div>


    </div>

    <script>
        // BUSCA OS VALORES DOS INPUTS
        const nomeUsuario = document.querySelector("#nome")
        const idadeUsuario = document.querySelector("#idade")
        const cursoUsuario = document.querySelector("#curso")

        // BOTÕES DE CHAMADAS
        const btnCadastrar = document.querySelector("#btn-cadastrar")
        const btnCancelar = document.querySelector("#btn-cadastrar")


        // CAIXA DE RESULTADO - SUCCESS/ERROR
        const resultadoParagrafo = document.querySelector("#resultadoParagrafo")

        // ALUNOS 
        const alunos = []


        // MOSTRA O ELEMENTO
        const mostrarElemento = (elemento) => {
            elemento.classList.remove("d-none")

        }

        // ESCONDE O ELEMENTO
        const esconderElemento = (elemento) => {
            elemento.classList.add("d-none")
        }

        // FORMATA O ELEMENTO PARAGRAFO PARA SUCESSO 
        const formatarParagrafoSucesso = (elemento, texto) => {
            resultadoParagrafo.classList.remove("text-danger")
            resultadoParagrafo.classList.add("text-success")
            resultadoParagrafo.textContent = texto
        }

        const formatarParagrafoErro = (elemento, texto) => {
            resultadoParagrafo.classList.remove("text-success")
            resultadoParagrafo.classList.add("text-danger")
            resultadoParagrafo.textContent = texto
        }

        const cadastrarUsuario = () => {
            console.log("Cadastrando usuário!")
            // REMOVE O PARAGRAFO DE ERRO
            resultadoParagrafo.classList.add("d-none")

            // FORMATA OS VALORES DOS INPUS
            const nome = nomeUsuario.value.trim()
            const idade = Number(idadeUsuario.value.trim())
            const curso = cursoUsuario.value.trim()

            // ADICIONA O PARAGRAFO DE ERRO CASO ALGUM INPUTS ESTEJA VAZIO
            if (!nome || !idade || !curso) {
                mostrarElemento(resultadoParagrafo)
                formatarParagrafoErro(resultadoParagrafo, "Preencha todos os campos antes de salvar o usuário!")
                return
            }

            alunos.push({ nome, idade, curso })

            // REMOVE A CLASSE DE ERRO, ADICIONA CLASSE DE TEXTO SUCESS, ADICIONA O TEXTO DE SUCESSO
            mostrarElemento(resultadoParagrafo)
            formatarParagrafoSucesso(resultadoParagrafo, "Foi cadastrado com sucesso!")
            console.log("chamando apagar")
            cancelarCadastrar() // APAGA OS INPUTS
            idAtual = alunos.length - 1
            renderizarAluno()


        }

        const cancelarCadastrar = () => {

            nomeUsuario.value = "";
            idadeUsuario.value = "";
            cursoUsuario.value = ""

        }



        // CHAMADAS DAS FUNÇÕES
        btnCadastrar.addEventListener('click', cadastrarUsuario)
        btnCancelar.addEventListener('click', cancelarCadastrar)



        //=====================     FICHA DE USUÁRIOS =====================

        // CAIXA DE TEXTOS PARA MOSTRA O ALUNO ATUAL
        const nome = document.querySelector("#aluno-nome")
        const idade = document.querySelector("#aluno-idade")
        const curso = document.querySelector("#aluno-curso")

        // BOTÕES DE SUCESSOR E ANTECESSOR
        const btnAnterior = document.querySelector("#btn-anterior")
        const btnProximo = document.querySelector("#btn-proximo")

        // DIV DE FICHA ALUNOS
        const fichaAlunos = document.querySelector("#ficha-alunos")

        let idAtual = 0;

        const renderizarAluno = () => {
            // VERIFICA SE POSSUI ALGUM ALUNO JÁ CADASTRADO.
            if (alunos.length > 0) {
                nome.textContent = alunos[idAtual].nome
                idade.textContent = alunos[idAtual].idade
                curso.textContent = alunos[idAtual].curso
                mostrarElemento(fichaAlunos)
            }
        }

        const proximoAluno = () => {
            idAtual++
            if (idAtual >= alunos.length) {
                idAtual = 0
            }
            renderizarAluno()
        }

        const anteriorAluno = () => {
            idAtual--
            if (idAtual < 0) {
                idAtual = alunos.length - 1
            }
            renderizarAluno()
        }

        // CHAMADA DAS FUNÇÕES
        btnProximo.addEventListener("click", proximoAluno)
        btnAnterior.addEventListener("click", anteriorAluno)

    </script>
</body>

</html>